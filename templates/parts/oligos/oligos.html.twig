{% extends 'homepage.html.twig' %}
{% from 'macros.html.twig' import pillify_epitopes, pillify_proteins %}
{% import 'layout.html.twig' as layout %}
{% import 'utility/icons.html.twig' as icons %}

{% block title %}Gin :: Oligos{% endblock %}


{% block body_main %}
<div class="row">
    <div class="container container-fluid w-100 p-0 m-0">
        {{ layout.header("Oligos", false, true, icons.oligo()) }}

        {{ layout.toolbox([
            {
                "type": "add",
                "tooltipText": "Add new oligo",
                "target": url("app_substance_new", {"type": "oligo"}),
            },
        ]) }}

        <div class="row">
            <div class="col bg-white mx-3 mb-3 border p-3 p-lg-5 overflow-scroll">
                <table class="table table-hover fancyTable">
                    <thead>
                        <tr>
                            <th scope="col" style="width: 50px;">
                                <div class="btn-group mr-3" style="visibility: hidden;">
                                    <span class="btn btn-sm btn-info"><span class="fa fa-eye"></span></span>
                                </div>
                            </th>
                            <th scope="col">
                                Name
                            </th>
                            <th scope="col">Length</th>
                            <th scope="col">Lots </th>
                            <th class="d-none d-lg-table-cell" scope="col">Sequence</th>
                        </tr>
                    </thead>
                    <tbody>
                    {% for oligo_row in oligos %}
                        {% set oligo = oligo_row[0] %}
                        {% set lotCount = oligo_row[1] %}
                        <tr>
                            <td class="align-middle">
                                <div class="btn-group mr-3">
                                    <a href="{{ url("app_oligo_view", {"oligoId": oligo.ulid}) }}" class="btn btn-sm btn-primary"><span class="fa fa-eye"></span></a>
                                </div>
                            </td>
                            <td>{{ oligo.shortName }}</td>
                            <td>{{ oligo.sequenceLength }}</td>
                            <td>{{ lotCount>0?lotCount:"-" }}</td>
                            <td class="d-none d-lg-table-cell">{{ oligo.sequence }}</td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
{% endblock %}