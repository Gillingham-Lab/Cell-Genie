{% extends 'homepage.html.twig' %}
{% import 'macros.html.twig' as macros %}
{% import 'layout.html.twig' as layout %}
{% import 'utility/icons.html.twig' as icons %}
{% from 'utility/substance_lot.html.twig' import lot %}

{% block title %}Gin :: Chemical :: {{ chemical.shortName }}{% endblock %}

{% block body_main %}
    <div class="row">
        <div class="container container-fluid w-100 p-0 m-0">
            {# Modified layout version #}
            {{ layout.header(chemical.shortName ~ " | " ~ chemical.longName) }}

            {{ layout.toolbox([
                {
                    "type": "up",
                    "target": url("app_compounds"),
                    "tooltipText": "Back to all chemicals",
                },
                {
                    "type": "edit",
                    "disabled": true,
                    "tooltipText": "Edit chemical",
                },
                {
                    "type": "add",
                    "tooltipText": "Add lot",
                    "target": url("app_substance_add_lot", {"substance": chemical.ulid}),
                }
            ]) }}


            <div class="row row-cols-1 row-cols-lg-2">
                {# Details #}
                <div class="col p-0 m-0 mb-3">
                    <div class="card mx-3 h-100">
                        {{ layout.card_header_collapse("Details", "Details") }}

                        {{ layout.card_body_collapse_start("Details") }}
                        <div class="card-body px-lg-5 mx-0">
                            <table class="table table-sm table-borderless table-hover">
                                <tbody>
                                {{ macros.definition_row("ID", chemical.ulid) }}
                                {{ macros.definition_row("Short name", chemical.shortName) }}
                                {{ macros.definition_row("Name", chemical.longName) }}

                                {% if chemical.labjournal %}
                                    {{ macros.definition_row("Labjournal", chemical.labjournal, chemical.labjournal) }}
                                {% else %}
                                    {{ macros.definition_row("Labjournal", "no entry") }}
                                {% endif %}

                                {% if chemical.vendor %}
                                    {{ macros.definition_row("Vendor", chemical.vendor.name, chemical.vendor.catalogUrl) }}
                                    {{ macros.definition_row("Vendor PN", chemical.vendorPN) }}
                                {% else %}
                                {% endif %}
                                </tbody>
                            </table>
                        </div>
                        {{ layout.card_body_collapse_end() }}
                    </div>
                </div>

                {# Structure #}
                <div class="col p-0 m-0 mb-3">
                    <div class="card mx-3 h-100">
                        {{ layout.card_header("Structure") }}

                        {{ layout.card_body_start() }}
                        <div class="card-body px-lg-5 mx-0 text-center">
                            <canvas data-smiles-type="large" data-smiles="{{ chemical.smiles ? chemical.smiles : "" }}" class="border d-inline-block align-middle"></canvas>
                        </div>
                        {{ layout.card_body_end() }}
                    </div>
                </div>

                {# Lot #}
                {{ lot(chemical) }}
            </div>
        </div>
    </div>
{% endblock %}